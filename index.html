<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Abnerzhao</title><meta name="description" content="DevOps"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Abnerzhao"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link active">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/Abnerzhao" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/09/09/Ansible-2-0-API-使用笔记/" class="post-title-link">Ansible 2.0 API 使用笔记</a></h2><div class="post-info">Sep 9, 2018</div><div class="post-content"><p>Ansible 2.0 较 1.0 变化还是比较大的，通过阅读 Changelog 简单梳理一下变化较大的点：</p>
<ul>
<li>block/rescue/always 指令可以创建任务块并引入了类似 Python 中 try/except/finally 异常处理结构</li>
<li>Playbook 解析、错误报告和动态执行 include 任务</li>
<li>新增 Execution Strategy Plugins（执行策略插件）</li>
<li>新增一些模块，包括 OpenStack 管理模块、扩展了对 AWS、VMware、Windows环境的支持，同时对 Docker 模块和连接插件进行了改进</li>
<li>许多插件 API 都发生了变化，新的 API 更易于使用和测试</li>
</ul>
<h3 id="Ansible-2-0-API-使用"><a href="#Ansible-2-0-API-使用" class="headerlink" title="Ansible 2.0 API 使用"></a>Ansible 2.0 API 使用</h3><h4 id="执行命令"><a href="#执行命令" class="headerlink" title="执行命令"></a>执行命令</h4></div><a href="/2018/09/09/Ansible-2-0-API-使用笔记/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/09/08/学习之道/" class="post-title-link">读「学习之道」</a></h2><div class="post-info">Sep 8, 2018</div><div class="post-content"><blockquote>
<p>公司书架上随手拿的一本书，豆瓣的评分还可以，于是花了一个礼拜读完，顺便做点笔记。</p>
</blockquote>
<p>这本书开篇就抛出了我们感同身受的一些问题。</p>
<blockquote>
<p>读完一本书，却记不得讲的什么？\<br>公众号、指导书、各种知识付费平台看了很多，却没有形成自己的学习体系？</p>
</blockquote>
<p>网上之前有句流行语：「你的同龄人正在抛弃你」，我们每个人或多或少都有些焦虑。一方面是对知识的焦虑，另一方面是低质量学习方式和方法。以为本书会对上面两个问题有很好的解答，结果却没有。</p>
<p>本书的作者本科专业是俄语，他很喜欢文学而理工科成绩却很差。但是他最终克服了对理工科特别是数学的恐惧，成为了一名工程学博士。所以本书更多的侧重点在于对理工学科的学习方法上，比较适合应试教育。当然也有一些从脑科学和心理学方面的研究成果对于不同学科的学习还是有参考价值的。</p>
<p>本书中对于我而言有收获有以下五点：</p>
<ul>
<li>专注思维和发散思维</li>
<li>工作记忆和长期记忆</li>
<li>记忆组块</li>
<li>拖延与习惯</li>
<li>学习法则</li>
</ul></div><a href="/2018/09/08/学习之道/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/08/19/QuerySet-API-学习笔记/" class="post-title-link">QuerySet API 学习笔记</a></h2><div class="post-info">Aug 19, 2018</div><div class="post-content"><h3 id="QuerySets-evaluated"><a href="#QuerySets-evaluated" class="headerlink" title="QuerySets evaluated"></a>QuerySets evaluated</h3><p>可以创建、过滤、切片和传递查询集而不用真实操作数据库。在你对查询集做求值之前，不会发生任何实际的数据库操作。</p>
<p>对于查询集我们使用以下方法进行求值：</p>
<ul>
<li>Iteration</li>
<li>Slicing</li>
<li>Pickling/Caching</li>
<li>repr()</li>
<li>len()</li>
<li>list()</li>
<li>bool()</li>
</ul>
<h3 id="QuerySet-API"><a href="#QuerySet-API" class="headerlink" title="QuerySet API"></a>QuerySet API</h3><h4 id="返回新的查询集方法"><a href="#返回新的查询集方法" class="headerlink" title="返回新的查询集方法"></a>返回新的查询集方法</h4><ul>
<li>filter</li>
</ul>
<p>返回一个新的 QuerySet 包含给定参数的查询匹配对象，更复杂的查询可以使用 Q 对象。</p>
<ul>
<li>exclude</li>
</ul>
<p>返回一个新的 QuerySet，它包含不满足给定的查找参数的对象，更复杂的查询同样可以使用 Q 对象。</p></div><a href="/2018/08/19/QuerySet-API-学习笔记/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/04/26/vagrant-notes/" class="post-title-link">Vagrant 使用笔记</a></h2><div class="post-info">Apr 26, 2018</div><div class="post-content"><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Vagrant 是一个基于 Ruby 用于创建和部署虚拟化环境的工具。</p>
<p>Vagrant 提供了易于配置、便于重现、且便携的工作环境，它基于行业技术标准，通过一个统一的流程控制来最大限度地提高 团队的灵活性及生产力。</p>
<p>为了实现其功能，Vagrant 站在了巨人的肩膀上，基于 VirtualBox、VMware、 AWS或其他虚拟机管理软件(provider) 的接口来创建虚拟机。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>软件包下载地址 <a href="https://www.vagrantup.com/downloads.html">Vagrant Downloads</a></p>
<p>我本地是 MAC OSX 环境，下载 Vagrant 和 ViruteBox dmg 文件安装即可</p>
<p>安装完成之后，Vagrant的软件安装目录在 <code>/opt/vagrant</code>，基本数据配置目录在 <code>/Users/{your-hostname}/.vagrant.d/</code></p></div><a href="/2018/04/26/vagrant-notes/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/04/11/jsTree-notes/" class="post-title-link">jsTree 使用笔记</a></h2><div class="post-info">Apr 11, 2018</div><div class="post-content"><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>jsTree 是一个免费开源的 jQuery 插件，可以提供交互式树型结构。jsTree 很容易扩展，配置方便，支持 HTML 和 JSON 数据源以及 AJAX 数据加载。它使用 jQuery 的事件系统，因此绑定树中各种事件的回调很容易实现。</p>
<h3 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h3><h4 id="获取文件"><a href="#获取文件" class="headerlink" title="获取文件"></a>获取文件</h4><p>要想正常加载 jsTree 需要满足一下三个条件：</p>
<ul>
<li>jQuery &gt; 1.9.1</li>
<li>A jstree theme</li>
<li>The jstree source file</li>
</ul></div><a href="/2018/04/11/jsTree-notes/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/04/05/douban-spider/" class="post-title-link">豆瓣房源爬虫小记</a></h2><div class="post-info">Apr 5, 2018</div><div class="post-content"><p>最近又要开始找房，来上海三年不到已经是第三次搬家，真是居大不易。现在住的房子是在豆瓣小组上找的，豆瓣上个人房源较多，但是豆瓣小组没有对房源信息进行分类，找起来比较费时，索性写了个简单的爬虫，根据关键字来找房。网上也有一些现成的代码实现，想着还是自己实践一下。</p>
<p>Python 新手上路…</p>
<h3 id="获取豆瓣房源小组链接"><a href="#获取豆瓣房源小组链接" class="headerlink" title="获取豆瓣房源小组链接"></a>获取豆瓣房源小组链接</h3><p>先搜索一下上海的租房小组</p>
<p><img src="https://github.com/Abnerzhao/Abnerzhao.github.io/blob/master/img/270B4257-2781-4F04-A000001F-A539B7F1791D.png" alt=""></p>
<p>找几个人数较多和活跃度高的小组，进入小组讨论页面，观察 URL 的规律。<br></div><a href="/2018/04/05/douban-spider/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/03/25/celery-background/" class="post-title-link">Celery 后台执行方法</a></h2><div class="post-info">Mar 25, 2018</div><div class="post-content"><h3 id="init-script"><a href="#init-script" class="headerlink" title="init-script"></a>init-script</h3><p>1.先下载两个脚本文件 <a href="https://github.com/celery/celery/tree/3.1/extra/generic-init.d/">generic-init.d</a>，我的项目里有定时任务，所以两个都需要用到</p>
<p>2.创建配置文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ cat /etc/default/celeryd</div><div class="line"># Names of nodes to start</div><div class="line">#   most people will only start one node:</div><div class="line"></div><div class="line">CELERYD_NODES=&quot;worker1&quot; # work 任务节点</div><div class="line"></div><div class="line">#   but you can also start multiple and configure settings</div><div class="line">#   for each in CELERYD_OPTS</div><div class="line">#CELERYD_NODES=&quot;worker1 worker2 worker3&quot;</div><div class="line">#   alternatively, you can specify the number of nodes to start:</div><div class="line">#CELERYD_NODES=10</div><div class="line"></div><div class="line"># Absolute or relative path to the &apos;celery&apos; command:</div><div class="line"></div><div class="line">CELERY_BIN=&quot;/home/prod/softwares/python/bin/celery&quot; # celery 命令的绝对路径</div><div class="line"></div><div class="line"># App instance to use</div><div class="line"># comment out this line if you don&apos;t use an app</div><div class="line"></div><div class="line">CELERY_APP=&quot;wfstar&quot; # 应用实例</div><div class="line"></div><div class="line"># or fully qualified:</div><div class="line">#CELERY_APP=&quot;proj.tasks:app&quot;</div><div class="line"></div><div class="line"># Where to chdir at start.</div><div class="line">CELERYD_CHDIR=&quot;/home/prod/deploys/wfstar&quot; # 项目目录</div><div class="line"></div><div class="line"># Extra command-line arguments to the worker</div><div class="line"></div><div class="line">CELERYD_OPTS=&quot;--time-limit=300 --concurrency=8&quot; # 命令行参数，更多请参考 man 手册 </div><div class="line"></div><div class="line"># Configure node-specific settings by appending node name to arguments:</div><div class="line">#CELERYD_OPTS=&quot;--time-limit=300 -c 8 -c:worker2 4 -c:worker3 2 -Ofair:worker1&quot;</div><div class="line"># Set logging level to DEBUG</div><div class="line">#CELERYD_LOG_LEVEL=&quot;DEBUG&quot;</div><div class="line"></div><div class="line"># %n will be replaced with the first part of the nodename</div><div class="line"></div><div class="line">CELERYD_LOG_FILE=&quot;/var/log/celery/%n%I.log&quot;</div><div class="line">CELERYD_PID_FILE=&quot;/var/run/celery/%n.pid&quot;</div><div class="line"></div><div class="line"># Workers should run as an unprivileged user.</div><div class="line">#   You need to create this user manually (or you can choose</div><div class="line">#   a user/group combination that already exists (e.g., nobody).</div><div class="line"></div><div class="line">CELERYD_USER=&quot;prod&quot;</div><div class="line">CELERYD_GROUP=&quot;prod&quot;</div><div class="line"></div><div class="line"># If enabled pid and log directories will be created if missing,</div><div class="line"># and owned by the userid/group configured.</div><div class="line">CELERY_CREATE_DIRS=1  # 自动创建日志和 pid 文件</div></pre></td></tr></table></figure></div><a href="/2018/03/25/celery-background/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/02/25/django-celery-notes/" class="post-title-link">Django Celery 定时任务笔记</a></h2><div class="post-info">Feb 25, 2018</div><div class="post-content"><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><ul>
<li>Python 2.7</li>
<li>Djang 1.10</li>
<li>celery 4.1.0</li>
<li>RabbitMQ 3.2.4</li>
</ul>
<h3 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h3><h4 id="创建虚拟环境，构建-Django-项目"><a href="#创建虚拟环境，构建-Django-项目" class="headerlink" title="创建虚拟环境，构建 Django 项目"></a>创建虚拟环境，构建 Django 项目</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ virtualenv django-exp</div><div class="line">$ source django-exp/bin/activate</div><div class="line">$ pip intall django==1.10</div><div class="line">$ django-admin startproject myproject</div><div class="line">$ cd myproject/</div><div class="line">$ django-admin startapp myapp</div><div class="line">$ tree</div><div class="line">.</div><div class="line">├── manage.py</div><div class="line">├── myapp</div><div class="line">│   ├── admin.py</div><div class="line">│   ├── apps.py</div><div class="line">│   ├── __init__.py</div><div class="line">│   ├── migrations</div><div class="line">│   │   └── __init__.py</div><div class="line">│   ├── models.py</div><div class="line">│   ├── tests.py</div><div class="line">│   └── views.py</div><div class="line">└── myproject</div><div class="line">    ├── __init__.py</div><div class="line">    ├── settings.py</div><div class="line">    ├── urls.py</div><div class="line">    └── wsgi.py</div><div class="line">$ pip install celery</div><div class="line">$ pip install pysqlite</div><div class="line">$ sudo apt-get install rabbitmq-server</div></pre></td></tr></table></figure></div><a href="/2018/02/25/django-celery-notes/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/12/02/2017年11月读书总结/" class="post-title-link">十一月读书总结</a></h2><div class="post-info">Dec 2, 2017</div><div class="post-content"><p>十一月份看了两本东野圭吾的书，心仪已久的「解忧杂货店」和暖心的「时生」。这两本书其实很不东野圭吾，不悬疑也不推理，而是如这冬日里一杯热咖啡。另外还看了两本关于自我管理的书，「时间管理：如何充分利用你的24小时」、「毅力：如何培养自律的习惯」。这两本书篇幅很短形式新颖，准确来说是漫画书，两节课的时间就能看完，其实就是看了两节课的PPT…</p></div><a href="/2017/12/02/2017年11月读书总结/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/10/14/quickstart-wiki/" class="post-title-link">使用Sphinx + GitHub + Read the Docs搭建wiki</a></h2><div class="post-info">Oct 14, 2017</div><div class="post-content"><p>Sphinx 是一个基于 ReStructuredText 的文档生成工具，有很多开源工程都采用sphinx作为文档生成系统，最有名的就是 python 官方文档。</p>
<p>Read the Docs是一个在线文档托管服务，可以从各种版本控制系统中导入文档。支持 webhooks，当你提交代码时，文档将被自动构建。</p>
<p>Sphinx + GitHub + ReadtheDocs 作为一个文档写作工具， 用 Sphinx 生成文档，GitHub 托管文档，再导入到 ReadtheDocs。我们可以使用这个工具写文档、记笔记等。</p>
<h3 id="搭建过程"><a href="#搭建过程" class="headerlink" title="搭建过程"></a>搭建过程</h3><h4 id="安装-Sphinx"><a href="#安装-Sphinx" class="headerlink" title="安装 Sphinx"></a>安装 Sphinx</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ sudo pip install sphinx</div></pre></td></tr></table></figure></div><a href="/2017/10/14/quickstart-wiki/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/09/26/python-torndb/" class="post-title-link">Python Torndb 简单使用</a></h2><div class="post-info">Sep 26, 2017</div><div class="post-content"><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p><a href="http://torndb.readthedocs.io/en/latest/">官方文档</a>释义：</p>
<blockquote>
<p>A lightweight wrapper around MySQLdb.<br>Originally part of the Tornado framework. The tornado.database module is slated for removal in Tornado 3.0, and it is now available separately as torndb.</p>
</blockquote>
<p>torndb 是一个基于 MySQLdb 封装的轻量级模块。</p>
<p>进一步了解请阅读源码：<a href="https://github.com/bdarnell/torndb">GitHub 源码地址</a></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ pip install torndb</div></pre></td></tr></table></figure></div><a href="/2017/09/26/python-torndb/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/09/04/set-up-svn-server/" class="post-title-link">Ubuntu 14.04 SVN 服务快速搭建</a></h2><div class="post-info">Sep 4, 2017</div><div class="post-content"><h3 id="软件包安装"><a href="#软件包安装" class="headerlink" title="软件包安装"></a>软件包安装</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ sudo apt-get install subversion apache2 libapache2-svn apache2-utils</div></pre></td></tr></table></figure>
<h3 id="创建仓库目录"><a href="#创建仓库目录" class="headerlink" title="创建仓库目录"></a>创建仓库目录</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ sudo mkdir -p /home/abner/svn</div><div class="line">$ sudo svnadmin create /home/abner/svn/test_project</div><div class="line">$ sudo svnadmin create /home/abner/svn/ops</div><div class="line">$ sudo chown -R www-data:www-data /home/abner/svn</div></pre></td></tr></table></figure>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p><code>/etc/apache2/mods-available/dav_svn.conf</code> 文件末尾添加如下配置：<br></div><a href="/2017/09/04/set-up-svn-server/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/08/02/How-to-use-strings-to-call-functions-or-methods/" class="post-title-link">通过字符串调用函数或方法</a></h2><div class="post-info">Aug 2, 2017</div><div class="post-content"><p>先看一个例子：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt;&gt;&gt; def foo():</div><div class="line">        print &quot;foo&quot;</div><div class="line"></div><div class="line">&gt;&gt;&gt; def bar():</div><div class="line">        print &quot;bar&quot;</div><div class="line"></div><div class="line">&gt;&gt;&gt; func_list = [&quot;foo&quot;,&quot;bar&quot;]</div><div class="line">&gt;&gt;&gt; for func in func_list:</div><div class="line">        func()</div><div class="line">TypeError: &apos;str&apos; object is not callable</div></pre></td></tr></table></figure></div><a href="/2017/08/02/How-to-use-strings-to-call-functions-or-methods/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/07/15/summer-s2/" class="post-title-link">那年夏天（二）</a></h2><div class="post-info">Jul 15, 2017</div><div class="post-content"><p>火车缓缓始离站台，窗外城市光影在雨水中渐渐模糊。半个多月的穷游之旅也划上了句号。始于昆明止于成都，记得刚到昆明时还有将近百来号人，而如今返程只有我和好基友两人。原计划在川渝逗留一阵，但是成都连续阴雨已让我们兴致全无。本以为自己根本就不会想家，但是冒雨走在成都街头的那一刻，我承认我想家了。天色渐暗，我想今晚我可能要失眠了，这一路上经历的片段不断浮现在我脑海，险境和绝美的风景让我内心不能平静，有趣的人和故事让我难以忘怀，火车疾驰穿过黑暗，天亮以后抵达的终点更让我难以入眠……</p>
<h3 id="踏上征途"><a href="#踏上征途" class="headerlink" title="踏上征途"></a>踏上征途</h3><p>硬座了二十多个小时的绿皮火车，从东南丘陵到云贵高原，最终抵达春城昆明。在昆明只停留了两天，搭帐篷睡在一个学校食堂里。正值暑期，学校已空无一人，组织者事先和校方沟通过，所以水电还是能够正常使用。在昆明发了半天传单赚了一顿过桥米线，后续时间就和小伙伴去了滇池、陆军讲武堂和云南大学。值得称道的是云大的食堂，超级便宜味道也不错，为了省钱去云大吃了几顿。昆明的确是四季如春，虽是夏季却从不需要空调。不时几朵棉花糖般的白云飘过湛蓝的天空，阳光从树影穿过洒在身上，我还是被这高原的紫外线分分钟晒红了。</p>
<p>昆明到大理，全程三百多公里。计划是用一天的时间到达大理。顺利的话全程高速也就四个多小时的样子。第一次搭车真的非常有趣，我和两位女生一行。说实话我简直沾尽了她们俩的光。我们计划先在市区搭车到高速入口，然后在往大理方向的路口拦顺风车。在高速路口，俩女生很快就拦到直达大理的顺风车还是很高端的顺风车。托她俩的福我人生第一次坐奔驰。奔驰哥是浙江人在云南做房地产生意，由于从昆明到大理要四个小时，他空车一人驾驶想找人聊聊天所以就拉上我们了。结果俩女生上车后倒头就睡，只剩我和奔驰哥再聊。奔驰哥人很友善随和，一路上各种嘘寒问暖各种关怀。傍晚时分，我们顺利到达了淅淅沥沥的雨中大理。<br></div><a href="/2017/07/15/summer-s2/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/07/08/summer-s1/" class="post-title-link">那年夏天（一）</a></h2><div class="post-info">Jul 8, 2017</div><div class="post-content"><p>最近午休时间总能听到树上聒噪的阵阵蝉鸣，晚上夜跑也有此起彼伏的蛙声相伴。转眼间，人生的第二十四个春夏已到来。一年四季中说不上特别喜欢夏天，但是对于夏天总有一些特别的情感和记忆。</p>
<p>夏天可以和小伙伴们肆无忌惮地玩水嬉戏，抱着冰西瓜吹风扇看电视，快速舔着渐渐融化的冰淇淋。特别喜欢凉爽的夏夜，明朗的星空下一家人在院内乘凉，远处池塘蛙声不断，耳畔徐来夏夜凉风和外婆年轻时的故事。</p>
<p>夏天有漫长慵懒的暑假。计划生育让我成为了独生子女，改革开放使我成为留守儿童的同时也让我拥有了不一样的暑期。印象中暑假去得最多的地方应该就数深圳了。坐着通宵的绿皮火车却没有一丝疲倦，内心更多的是欢喜和期待。小的时候就特别喜欢火车，大姨家就在湘江边，每天都有红色和绿色的火车来回跨江而过，而我最喜欢做的事情就是远远的望着火车轰鸣而过并数它的节数，直到现在还有这种火车情节，因为我知道它代表着远方。每次去深圳都是到舅舅家，一来是舅舅家有两个小孩即我表妹和表弟，年纪相仿从小青梅竹马一起长大，所以都是一起玩，二来我也没有其他地方可以去。嘈杂的市场、熙攘的人流、糅杂着鱼腥和卤味的空气、网吧CS、欢乐谷、大梅沙、还有那条植被茂密宽广的深南大道构成了我对深圳的全部记忆。我相信深圳这个地名会根植在几代人的记忆中，无论是淘金者还是像我们这样的留守儿童。</p>
<p>还有一件人生比较重大的事也发生在夏季那就是毕业。以前并不觉得毕业是件重大的事，只不过是按部就班地完成学业而已。现在看来每次毕业都是一次重大地选择，选择去哪座城市哪个学校完成下一阶段的学习。通过一次次的毕业，我从乡村到县城到市区再到上海。依稀记得我的高考第一志愿是沈阳理工大学，当时只有一个想法那是离家越远越好。我和两位要好的朋友都填了这所大学，现在想来还有点儿戏。最终我差四分留在了省内，另两位朋友都被录取了，但是只有一位去了北方，另一位复读了。高中毕业还是挺难忘了，毕竟都天真地以为彻底解放了。其实高中生活也没那么苦，更多的是充实和忙碌。说实话还挺怀念那段青葱岁月的，可能是因为那时有一群朋友为共同的目标奋斗着，而如今在陌生的繁华都市里却朋友寥寥。大学毕业则很轻松愉快，除了偶尔缅怀校园生活，伤感青春易逝之外，更多的是对未来人生的憧憬。</p></div><a href="/2017/07/08/summer-s1/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/04/11/ansible-callback-plugins/" class="post-title-link">Ansible 回调插件简单使用</a></h2><div class="post-info">Apr 11, 2017</div><div class="post-content"><h2 id="Developing-Plugins"><a href="#Developing-Plugins" class="headerlink" title="Developing Plugins"></a>Developing Plugins</h2><p>插件是增强ansible核心功能的代码片段，我们可以很方便的使用插件，编写插件代码。如果我们想要对ansible的执行结果进行分析，根据返回结果发送邮件，写入日志等都可以通过插件实现。</p>
<h3 id="插件列表"><a href="#插件列表" class="headerlink" title="插件列表"></a>插件列表</h3><ul>
<li><strong>Action plugins</strong> are front ends to modules and can execute actions on the controller before calling the modules themselves.（操作插件，调用模块之前执行操作）</li>
<li><strong>Cache plugins</strong> are used to keep a cache of ‘facts’ to avoid costly fact-gathering operations.（缓存插件，缓存主机facts变量）</li>
<li><strong>Callback plugins</strong> enable you to hook into Ansible events for display or logging purposes.（回调插件，对事件进行显示和记录，这个常用）</div><a href="/2017/04/11/ansible-callback-plugins/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/03/05/Python正则表达式/" class="post-title-link">Python正则表达式</a></h2><div class="post-info">Mar 5, 2017</div><div class="post-content"><p><strong>正则表达式是一些由字符和特殊符号组成的字符串，它们描􏰀述了这些字符和字符的某种重复方式，因此能按某种模式匹配一个有相似特征的字符串的集合。</strong>正则表达式为高级文本模式匹配，以及搜索-替代等功能􏰁供了基础。</p>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><p>元字符是正则表达式中规定的特殊代码，有特定的含义和匹配效果</p>
<p><strong>常用的元字符</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">代码</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td style="text-align:left">\w</td>
<td style="text-align:left">匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td style="text-align:left">\s</td>
<td style="text-align:left">匹配任意的空白符(包括空格，制表符(Tab)，换行符，中文全角空格等)</td>
</tr>
<tr>
<td style="text-align:left">\d</td>
<td style="text-align:left">匹配数字</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td style="text-align:left">匹配单词的开始或结束(空格、标点、换行都算是单词的分割)</td>
</tr>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">匹配字符串的开始</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">匹配字符串的结束</td>
</tr>
</tbody>
</table></div><a href="/2017/03/05/Python正则表达式/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/01/21/low-level-discovery/" class="post-title-link">Zabbix Low-level discovery</a></h2><div class="post-info">Jan 21, 2017</div><div class="post-content"><blockquote>
<p>Low-level discovery provides a way to automatically create items, triggers, and graphs for different entities on a computer. For instance, Zabbix can automatically start monitoring file systems or network interfaces on your machine, without the need to create items for each file system or network interface manually. </p>
<p>In Zabbix, four types of item discovery are supported out of the box:</p>
<ul>
<li>discovery of file systems;</li>
<li>discovery of network interfaces;</li>
<li>discovery of CPUs and CPU cores;</li>
<li>discovery of SNMP OIDs.</li>
</ul>
<p>A user can define their own types of discovery, provided they follow a particular JSON protocol.</p>
</blockquote></div><a href="/2017/01/21/low-level-discovery/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/11/16/python-datetime/" class="post-title-link">Python datetime那点事</a></h2><div class="post-info">Nov 16, 2016</div><div class="post-content"><p>关于datetime时间操作在日常工作中也没有经常用到，但是每次要用时却又想不起来，与其重复查文档不如总结一下备忘。本文只简单记录了常用的一些方法，不同类型格式之间的转换(如时间对象类型、字符串、timestamp、time tuple类型）以及时区问题等暂未深入了解。</p>
<h2 id="datetime模块"><a href="#datetime模块" class="headerlink" title="datetime模块"></a>datetime模块</h2><p>datetime 模块主要用来操作日期和时间</p>
<h3 id="date日期对象"><a href="#date日期对象" class="headerlink" title="date日期对象"></a>date日期对象</h3><figure class="highlight python"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> datetime</div><div class="line"></div><div class="line"><span class="keyword">print</span> datetime.date.today()  //返回当前本地日期</div><div class="line"><span class="keyword">print</span> datetime.date(<span class="number">2016</span>,<span class="number">11</span>,<span class="number">16</span>) //生成日期对象</div><div class="line"></div><div class="line">//stdout</div><div class="line"><span class="number">2016</span><span class="number">-11</span><span class="number">-16</span></div><div class="line"><span class="number">2016</span><span class="number">-11</span><span class="number">-16</span></div></pre></td></tr></table></figure></div><a href="/2016/11/16/python-datetime/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/11/04/ansible-python-api/" class="post-title-link">小试Ansible Python API</a></h2><div class="post-info">Nov 4, 2016</div><div class="post-content"><h2 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h2><h3 id="命令行"><a href="#命令行" class="headerlink" title="命令行"></a>命令行</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">// ping 模块</div><div class="line">$ ansible localhost -m ping</div><div class="line">localhost | success &gt;&gt; &#123;</div><div class="line">    &quot;changed&quot;: false,</div><div class="line">    &quot;ping&quot;: &quot;pong&quot;</div><div class="line">&#125;</div><div class="line">// shell 模块</div><div class="line">$ ansible localhost -m shell -a &apos;uptime&apos;</div><div class="line">localhost | success | rc=0 &gt;&gt;</div><div class="line">11:00:11 up 66 days, 23:34,  1 user,  load average: 0.00, 0.01, 0.05</div></pre></td></tr></table></figure>
<h3 id="Python-API"><a href="#Python-API" class="headerlink" title="Python API"></a>Python API</h3><p>通过ansible.runner模块来实现</p></div><a href="/2016/11/04/ansible-python-api/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/09/18/python-dict-list-sort/" class="post-title-link">Python字典排序和列表去重</a></h2><div class="post-info">Sep 18, 2016</div><div class="post-content"><h2 id="字典排序"><a href="#字典排序" class="headerlink" title="字典排序"></a>字典排序</h2><h3 id="字典key排序"><a href="#字典key排序" class="headerlink" title="字典key排序"></a>字典key排序</h3><p>方法一：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">dict = &#123;&apos;b&apos;:3,&apos;a&apos;:1,&apos;d&apos;:7,&apos;c&apos;:5&#125;</div><div class="line">items = dict.items()</div><div class="line">items.sort()</div><div class="line"></div><div class="line">print [(k,v) for k,v in items] //[(&apos;a&apos;, 1), (&apos;b&apos;, 3), (&apos;c&apos;, 5), (&apos;d&apos;, 7)]</div></pre></td></tr></table></figure></div><a href="/2016/09/18/python-dict-list-sort/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/05/23/screen/" class="post-title-link">Screen会话管理</a></h2><div class="post-info">May 23, 2016</div><div class="post-content"><h3 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h3><p>GNU Screen是一款由GNU计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。</p>
<p><a href="http://www.gnu.org/software/screen/">GNU’s Screen 官方站点</a></p>
<h3 id="二、功能"><a href="#二、功能" class="headerlink" title="二、功能"></a>二、功能</h3><h4 id="会话恢复"><a href="#会话恢复" class="headerlink" title="会话恢复"></a>会话恢复</h4><p>只要Screen本身没有终止，在其内部运行的会话都可以恢复。对于远程登录的用户即使网络连接中断，用户也不会失去对已经打开的命令行会话的控制。</p>
<h4 id="多窗口"><a href="#多窗口" class="headerlink" title="多窗口"></a>多窗口</h4><p>在Screen环境下，所有的会话都独立的运行，并拥有各自的编号、输入、输出和窗口缓存。用户可以通过快捷键在不同的窗口下切换，并可以自由的重定向各个窗口的输入和输出。</p></div><a href="/2016/05/23/screen/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/05/20/ansible/" class="post-title-link">Ansible基础知识备忘</a></h2><div class="post-info">May 20, 2016</div><div class="post-content"><h2 id="一、体系结构"><a href="#一、体系结构" class="headerlink" title="一、体系结构"></a>一、体系结构</h2><p>ansible是一款基于python开发，揉合了众多自动化运维工具功能的轻量级自动化运维工具，目前实现了除系统安装以外的批量系统配置、批量任务执行及批量程序部署等功能。</p>
<p><img src="https://github.com/Abnerzhao/Abnerzhao.github.io/blob/master/img/25.png" alt=""></p>
<ul>
<li>Inventory：主机库，定义可控制的主机</li>
<li>Modules：基于模块化设计，通过模块来实现批量部署</li>
<li>playbook：剧本，使用YAML编写的声明性的配置文件</li>
<li>plugins: 插件，完成日志记录、邮件等功能</li>
</ul></div><a href="/2016/05/20/ansible/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/02/25/ulimit/" class="post-title-link">ulimit小记</a></h2><div class="post-info">Feb 25, 2016</div><div class="post-content"><h2 id="ulimit简介"><a href="#ulimit简介" class="headerlink" title="ulimit简介"></a>ulimit简介</h2><p>ulimit 用于限制 shell 启动进程所占用的资源，支持以下各种类型的限制：所创建的内核文件的大小、进程数据块的大小、Shell 进程创建文件的大小、内存锁住的大小、常驻内存集的大小、打开文件描述符的数量、分配堆栈的最大大小、CPU 时间、单个用户的最大线程数、Shell 进程所能使用的最大虚拟内存。同时，它支持硬资源和软资源的限制。</p>
<p>作为临时限制，ulimit 可以作用于通过使用其命令登录的 shell 会话，在会话终止时便结束限制，并不影响于其他 shell 会话。而对于长期的固定限制，ulimit 命令语句又可以被添加到由登录 shell 读取的文件中，作用于特定的 shell 用户。</p></div><a href="/2016/02/25/ulimit/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/01/15/mysql-duplicate/" class="post-title-link">MySQL主从复制备忘</a></h2><div class="post-info">Jan 15, 2016</div><div class="post-content"><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul>
<li><p>Master:10.249.17.38</p>
</li>
<li><p>Slave:10.249.17.45</p>
</li>
</ul>
<h2 id="主从复制的原理"><a href="#主从复制的原理" class="headerlink" title="主从复制的原理"></a>主从复制的原理</h2><ul>
<li>主从复制的步骤</li>
</ul>
<p><img src="https://github.com/Abnerzhao/Abnerzhao.github.io/blob/master/img/94D51A80-A0DB-4189-8F30-673260AC6FCC.png" alt=""></p></div><a href="/2016/01/15/mysql-duplicate/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/01/01/command/" class="post-title-link">运维必备之Linux命令概览</a></h2><div class="post-info">Jan 1, 2016</div><div class="post-content"></div><a href="/2016/01/01/command/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2015/10/21/dmidecode/" class="post-title-link">dmidecode查看服务器硬件信息</a></h2><div class="post-info">Oct 21, 2015</div><div class="post-content"></div><a href="/2015/10/21/dmidecode/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2015/10/11/raid/" class="post-title-link">RAID阵列卡系列命令备忘</a></h2><div class="post-info">Oct 11, 2015</div><div class="post-content"><h2 id="阵列卡类型"><a href="#阵列卡类型" class="headerlink" title="阵列卡类型"></a>阵列卡类型</h2><h3 id="查看阵列卡的类型"><a href="#查看阵列卡的类型" class="headerlink" title="查看阵列卡的类型"></a>查看阵列卡的类型</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ lspci | grep -i raid</div></pre></td></tr></table></figure>
<p>一般有LSI和HP的两种，对应的管理命令为 MegaCli 和 hpssacli</p>
<p>LSI官方网站和驱动下载： <a href="http://www.avagotech.com">avagotech</a></p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="LSI的MegaSAS-RAID卡系列命令"><a href="#LSI的MegaSAS-RAID卡系列命令" class="headerlink" title="LSI的MegaSAS RAID卡系列命令"></a>LSI的MegaSAS RAID卡系列命令</h3><h4 id="显示所有逻辑磁盘组信息"><a href="#显示所有逻辑磁盘组信息" class="headerlink" title="显示所有逻辑磁盘组信息"></a>显示所有逻辑磁盘组信息</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ MegaCli -LDInfo -Lall -aALL</div><div class="line">$ MegaCli -LDInfo -Lall -aALL | grep State</div><div class="line">// 过滤State， 正常情况为：&quot;State : Optimal&quot;，否则为异常，例如 &quot;State : Degraded&quot;</div></pre></td></tr></table></figure></div><a href="/2015/10/11/raid/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2015/09/15/ipmitool/" class="post-title-link">ipmitool智能平台管理工具</a></h2><div class="post-info">Sep 15, 2015</div><div class="post-content"></div><a href="/2015/09/15/ipmitool/" class="read-more">...more</a></article></li></ul></main><footer><div class="paginator"></div><div class="copyright"><p>© 2015 - 2018 <a href="http://yoursite.com">Abnerzhao</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>