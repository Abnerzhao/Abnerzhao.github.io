<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Abnerzhao</title><meta name="description" content="DevOps"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Abnerzhao"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link active">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/2863179107/profile?topnav=1&amp;wvr=6&amp;is_all=1" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/Abnerzhao" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/10/14/quickstart-wiki/" class="post-title-link">使用Sphinx + GitHub + Read the Docs快速搭建个人wiki</a></h2><div class="post-info">Oct 14, 2017</div><div class="post-content"><p>Sphinx 是一个基于 ReStructuredText 的文档生成工具，有很多开源工程都采用sphinx作为文档生成系统，最有名的就是 python 官方文档。</p>
<p>Read the Docs是一个在线文档托管服务，可以从各种版本控制系统中导入文档。支持 webhooks，当你提交代码时，文档将被自动构建。</p>
<p>Sphinx + GitHub + ReadtheDocs 作为一个文档写作工具， 用 Sphinx 生成文档，GitHub 托管文档，再导入到 ReadtheDocs。我们可以使用这个工具写文档、记笔记等。</p>
<h3 id="搭建过程"><a href="#搭建过程" class="headerlink" title="搭建过程"></a>搭建过程</h3><h4 id="安装-Sphinx"><a href="#安装-Sphinx" class="headerlink" title="安装 Sphinx"></a>安装 Sphinx</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">e sudo pip install sphinx</div></pre></td></tr></table></figure></div><a href="/2017/10/14/quickstart-wiki/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/09/26/python-torndb/" class="post-title-link">Python Torndb 简单使用</a></h2><div class="post-info">Sep 26, 2017</div><div class="post-content"><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p><a href="http://torndb.readthedocs.io/en/latest/">官方文档</a>释义：</p>
<blockquote>
<p>A lightweight wrapper around MySQLdb.<br>Originally part of the Tornado framework. The tornado.database module is slated for removal in Tornado 3.0, and it is now available separately as torndb.</p>
</blockquote>
<p>torndb 是一个基于 MySQLdb 封装的轻量级模块。</p>
<p>进一步了解请阅读源码：<a href="https://github.com/bdarnell/torndb">GitHub 源码地址</a></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ pip install torndb</div></pre></td></tr></table></figure></div><a href="/2017/09/26/python-torndb/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/09/04/set-up-svn-server/" class="post-title-link">Ubuntu 14.04 SVN 服务快速搭建</a></h2><div class="post-info">Sep 4, 2017</div><div class="post-content"><h3 id="软件包安装"><a href="#软件包安装" class="headerlink" title="软件包安装"></a>软件包安装</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ sudo apt-get install subversion apache2 libapache2-svn apache2-utils</div></pre></td></tr></table></figure>
<h3 id="创建仓库目录"><a href="#创建仓库目录" class="headerlink" title="创建仓库目录"></a>创建仓库目录</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ sudo mkdir -p /home/abner/svn</div><div class="line">$ sudo svnadmin create /home/abner/svn/test_project</div><div class="line">$ sudo svnadmin create /home/abner/svn/ops</div><div class="line">$ sudo chown -R www-data:www-data /home/abner/svn</div></pre></td></tr></table></figure>
<h3 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h3><p><code>/etc/apache2/mods-available/dav_svn.conf</code> 文件末尾添加如下配置：<br></div><a href="/2017/09/04/set-up-svn-server/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/08/02/How-to-use-strings-to-call-functions-or-methods/" class="post-title-link">通过字符串调用函数或方法</a></h2><div class="post-info">Aug 2, 2017</div><div class="post-content"><p>先看一个例子：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">&gt;&gt;&gt; def foo():</div><div class="line">        print &quot;foo&quot;</div><div class="line"></div><div class="line">&gt;&gt;&gt; def bar():</div><div class="line">        print &quot;bar&quot;</div><div class="line"></div><div class="line">&gt;&gt;&gt; func_list = [&quot;foo&quot;,&quot;bar&quot;]</div><div class="line">&gt;&gt;&gt; for func in func_list:</div><div class="line">        func()</div><div class="line">TypeError: &apos;str&apos; object is not callable</div></pre></td></tr></table></figure></div><a href="/2017/08/02/How-to-use-strings-to-call-functions-or-methods/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/07/15/summer-s2/" class="post-title-link">那年夏天（二）</a></h2><div class="post-info">Jul 15, 2017</div><div class="post-content"><p>火车缓缓始离站台，窗外城市光影在雨水中渐渐模糊。半个多月的穷游之旅也划上了句号。始于昆明止于成都，记得刚到昆明时还有将近百来号人，而如今返程只有我和好基友两人。原计划在川渝逗留一阵，但是成都连续阴雨已让我们兴致全无。本以为自己根本就不会想家，但是冒雨走在成都街头的那一刻，我承认我想家了。天色渐暗，我想今晚我可能要失眠了，这一路上经历的片段不断浮现在我脑海，险境和绝美的风景让我内心不能平静，有趣的人和故事让我难以忘怀，火车疾驰穿过黑暗，天亮以后抵达的终点更让我难以入眠……</p>
<h3 id="踏上征途"><a href="#踏上征途" class="headerlink" title="踏上征途"></a>踏上征途</h3><p>硬座了二十多个小时的绿皮火车，从东南丘陵到云贵高原，最终抵达春城昆明。在昆明只停留了两天，搭帐篷睡在一个学校食堂里。正值暑期，学校已空无一人，组织者事先和校方沟通过，所以水电还是能够正常使用。在昆明发了半天传单赚了一顿过桥米线，后续时间就和小伙伴去了滇池、陆军讲武堂和云南大学。值得称道的是云大的食堂，超级便宜味道也不错，为了省钱去云大吃了几顿。昆明的确是四季如春，虽是夏季却从不需要空调。不时几朵棉花糖般的白云飘过湛蓝的天空，阳光从树影穿过洒在身上，我还是被这高原的紫外线分分钟晒红了。</p>
<p>昆明到大理，全程三百多公里。计划是用一天的时间到达大理。顺利的话全程高速也就四个多小时的样子。第一次搭车真的非常有趣，我和两位女生一行。说实话我简直沾尽了她们俩的光。我们计划先在市区搭车到高速入口，然后在往大理方向的路口拦顺风车。在高速路口，俩女生很快就拦到直达大理的顺风车还是很高端的顺风车。托她俩的福我人生第一次坐奔驰。奔驰哥是浙江人在云南做房地产生意，由于从昆明到大理要四个小时，他空车一人驾驶想找人聊聊天所以就拉上我们了。结果俩女生上车后倒头就睡，只剩我和奔驰哥再聊。奔驰哥人很友善随和，一路上各种嘘寒问暖各种关怀。傍晚时分，我们顺利到达了淅淅沥沥的雨中大理。<br></div><a href="/2017/07/15/summer-s2/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/07/08/summer-s1/" class="post-title-link">那年夏天（一）</a></h2><div class="post-info">Jul 8, 2017</div><div class="post-content"><p>最近午休时间总能听到树上聒噪的阵阵蝉鸣，晚上夜跑也有此起彼伏的蛙声相伴。转眼间，人生的第二十四个春夏已到来。一年四季中说不上特别喜欢夏天，但是对于夏天总有一些特别的情感和记忆。</p>
<p>夏天可以和小伙伴们肆无忌惮地玩水嬉戏，抱着冰西瓜吹风扇看电视，快速舔着渐渐融化的冰淇淋。特别喜欢凉爽的夏夜，明朗的星空下一家人在院内乘凉，远处池塘蛙声不断，耳畔徐来夏夜凉风和外婆年轻时的故事。</p>
<p>夏天有漫长慵懒的暑假。计划生育让我成为了独生子女，改革开放使我成为留守儿童的同时也让我拥有了不一样的暑期。印象中暑假去得最多的地方应该就数深圳了。坐着通宵的绿皮火车却没有一丝疲倦，内心更多的是欢喜和期待。小的时候就特别喜欢火车，大姨家就在湘江边，每天都有红色和绿色的火车来回跨江而过，而我最喜欢做的事情就是远远的望着火车轰鸣而过并数它的节数，直到现在还有这种火车情节，因为我知道它代表着远方。每次去深圳都是到舅舅家，一来是舅舅家有两个小孩即我表妹和表弟，年纪相仿从小青梅竹马一起长大，所以都是一起玩，二来我也没有其他地方可以去。嘈杂的市场、熙攘的人流、糅杂着鱼腥和卤味的空气、网吧CS、欢乐谷、大梅沙、还有那条植被茂密宽广的深南大道构成了我对深圳的全部记忆。我相信深圳这个地名会根植在几代人的记忆中，无论是淘金者还是像我们这样的留守儿童。</p>
<p>还有一件人生比较重大的事也发生在夏季那就是毕业。以前并不觉得毕业是件重大的事，只不过是按部就班地完成学业而已。现在看来每次毕业都是一次重大地选择，选择去哪座城市哪个学校完成下一阶段的学习。通过一次次的毕业，我从乡村到县城到市区再到上海。依稀记得我的高考第一志愿是沈阳理工大学，当时只有一个想法那是离家越远越好。我和两位要好的朋友都填了这所大学，现在想来还有点儿戏。最终我差四分留在了省内，另两位朋友都被录取了，但是只有一位去了北方，另一位复读了。高中毕业还是挺难忘了，毕竟都天真地以为彻底解放了。其实高中生活也没那么苦，更多的是充实和忙碌。说实话还挺怀念那段青葱岁月的，可能是因为那时有一群朋友为共同的目标奋斗着，而如今在陌生的繁华都市里却朋友寥寥。大学毕业则很轻松愉快，除了偶尔缅怀校园生活，伤感青春易逝之外，更多的是对未来人生的憧憬。</p></div><a href="/2017/07/08/summer-s1/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/04/11/ansible-callback-plugins/" class="post-title-link">Ansible 回调插件简单使用</a></h2><div class="post-info">Apr 11, 2017</div><div class="post-content"><h2 id="Developing-Plugins"><a href="#Developing-Plugins" class="headerlink" title="Developing Plugins"></a>Developing Plugins</h2><p>插件是增强ansible核心功能的代码片段，我们可以很方便的使用插件，编写插件代码。如果我们想要对ansible的执行结果进行分析，根据返回结果发送邮件，写入日志等都可以通过插件实现。</p>
<h3 id="插件列表"><a href="#插件列表" class="headerlink" title="插件列表"></a>插件列表</h3><ul>
<li><strong>Action plugins</strong> are front ends to modules and can execute actions on the controller before calling the modules themselves.（操作插件，调用模块之前执行操作）</li>
<li><strong>Cache plugins</strong> are used to keep a cache of ‘facts’ to avoid costly fact-gathering operations.（缓存插件，缓存主机facts变量）</li>
<li><strong>Callback plugins</strong> enable you to hook into Ansible events for display or logging purposes.（回调插件，对事件进行显示和记录，这个常用）</div><a href="/2017/04/11/ansible-callback-plugins/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/03/05/Python正则表达式/" class="post-title-link">Python正则表达式</a></h2><div class="post-info">Mar 5, 2017</div><div class="post-content"><p><strong>正则表达式是一些由字符和特殊符号组成的字符串，它们描􏰀述了这些字符和字符的某种重复方式，因此能按某种模式匹配一个有相似特征的字符串的集合。</strong>正则表达式为高级文本模式匹配，以及搜索-替代等功能􏰁供了基础。</p>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><p>元字符是正则表达式中规定的特殊代码，有特定的含义和匹配效果</p>
<p><strong>常用的元字符</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">代码</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td style="text-align:left">\w</td>
<td style="text-align:left">匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td style="text-align:left">\s</td>
<td style="text-align:left">匹配任意的空白符(包括空格，制表符(Tab)，换行符，中文全角空格等)</td>
</tr>
<tr>
<td style="text-align:left">\d</td>
<td style="text-align:left">匹配数字</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td style="text-align:left">匹配单词的开始或结束(空格、标点、换行都算是单词的分割)</td>
</tr>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">匹配字符串的开始</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">匹配字符串的结束</td>
</tr>
</tbody>
</table></div><a href="/2017/03/05/Python正则表达式/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/01/21/low-level-discovery/" class="post-title-link">Zabbix Low-level discovery</a></h2><div class="post-info">Jan 21, 2017</div><div class="post-content"><blockquote>
<p>Low-level discovery provides a way to automatically create items, triggers, and graphs for different entities on a computer. For instance, Zabbix can automatically start monitoring file systems or network interfaces on your machine, without the need to create items for each file system or network interface manually. </p>
<p>In Zabbix, four types of item discovery are supported out of the box:</p>
<ul>
<li>discovery of file systems;</li>
<li>discovery of network interfaces;</li>
<li>discovery of CPUs and CPU cores;</li>
<li>discovery of SNMP OIDs.</li>
</ul>
<p>A user can define their own types of discovery, provided they follow a particular JSON protocol.</p>
</blockquote></div><a href="/2017/01/21/low-level-discovery/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/11/16/python-datetime/" class="post-title-link">Python datetime那点事</a></h2><div class="post-info">Nov 16, 2016</div><div class="post-content"><p>关于datetime时间操作在日常工作中也没有经常用到，但是每次要用时却又想不起来，与其重复查文档不如总结一下备忘。本文只简单记录了常用的一些方法，不同类型格式之间的转换(如时间对象类型、字符串、timestamp、time tuple类型）以及时区问题等暂未深入了解。</p>
<h2 id="datetime模块"><a href="#datetime模块" class="headerlink" title="datetime模块"></a>datetime模块</h2><p>datetime 模块主要用来操作日期和时间</p>
<h3 id="date日期对象"><a href="#date日期对象" class="headerlink" title="date日期对象"></a>date日期对象</h3><figure class="highlight python"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> datetime</div><div class="line"></div><div class="line"><span class="keyword">print</span> datetime.date.today()  //返回当前本地日期</div><div class="line"><span class="keyword">print</span> datetime.date(<span class="number">2016</span>,<span class="number">11</span>,<span class="number">16</span>) //生成日期对象</div><div class="line"></div><div class="line">//stdout</div><div class="line"><span class="number">2016</span><span class="number">-11</span><span class="number">-16</span></div><div class="line"><span class="number">2016</span><span class="number">-11</span><span class="number">-16</span></div></pre></td></tr></table></figure></div><a href="/2016/11/16/python-datetime/" class="read-more">...more</a></article></li></ul></main><footer><div class="paginator"><a href="/page/2/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://yoursite.com">Abnerzhao</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>