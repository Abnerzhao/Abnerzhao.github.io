<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Abnerzhao"><meta name="description" content="简单调试示例$python-mpdbexp.py#停在脚本第一行等待调试&amp;gt;/Users/Mr-zhao/work_space/scripts/exp.py(3)&amp;lt;module&amp;gt;()-&amp;gt;a=1(Pdb)l#list列出当前"><meta name="keywords" content="pdb"><title>pdb代码调试 · Abner</title><link rel="icon" href="/favicon.ico"><link rel="canonical" href="http://yoursite.com/2016/11/11/pdb/"><link rel="alternate" href="/atom.xml" title="Abner"><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><link rel="stylesheet" href="/css/style.css"><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?5832f612aff8681e2ee213a3b8d9548b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'Your Google Analytics ID', 'auto');
ga('send', 'pageview');</script></head><body><div id="main"><header><a href="/." class="logo">Abner</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li><li class="nav-link"><a href="/categories/" target="_self">Categories</a></li><li class="nav-link"><a href="/about/" target="_self">About</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">pdb代码调试</h1><span class="post-time">Nov 11, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Contents</h3><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#简单调试示例"><span class="toc-text">简单调试示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常用命令"><span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置断点"><span class="toc-text">设置断点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令行方式"><span class="toc-text">命令行方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#脚本内部设置"><span class="toc-text">脚本内部设置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考"><span class="toc-text">参考</span></a></li></ol></div><div class="post-content"><h3 id="简单调试示例"><a href="#简单调试示例" class="headerlink" title="简单调试示例"></a>简单调试示例</h3><pre><code>$ python -m pdb exp.py  #停在脚本第一行等待调试
&gt; /Users/Mr-zhao/work_space/scripts/exp.py(3)&lt;module&gt;()
-&gt; a = 1
(Pdb) l    #list列出当前代码所在行
    1   #!/usr/bin/env python
    2
    3  -&gt;   a = 1
    4   b = 2
    5   c = 3
    6   d = a+b+c
    7   print d
[EOF]
(Pdb) n #next执行下一行
&gt; /Users/Mr-zhao/work_space/scripts/exp.py(4)&lt;module&gt;()
-&gt; b = 2
(Pdb) p a  #打印变量值，pp和print都可以
1
(Pdb) c  #continue继续执行程序，遇到断点则停止
6    #由于脚本没有设置断点，则直接运行完成输出结果
The program finished and will be restarted
&gt; /Users/Mr-zhao/work_space/scripts/exp.py(3)&lt;module&gt;()
-&gt; a = 1
(Pdb) q  # exit退出
</code></pre><a id="more"></a>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>break 或 b</td>
<td>设置断点</td>
</tr>
<tr>
<td>continue 或 c</td>
<td>继续执行程序，遇到断点则停止</td>
</tr>
<tr>
<td>list 或 l</td>
<td>查看当前行的代码段，默认显示11行代码</td>
</tr>
<tr>
<td>step 或 s</td>
<td>进入函数</td>
</tr>
<tr>
<td>return 或 r</td>
<td>执行代码直到从当前函数返回</td>
</tr>
<tr>
<td>exit 或 q</td>
<td>中止并退出</td>
</tr>
<tr>
<td>next 或 n</td>
<td>执行下一行</td>
</tr>
<tr>
<td>p 或 pp</td>
<td>打印变量的值</td>
</tr>
<tr>
<td>help</td>
<td>帮助</td>
</tr>
</tbody>
</table>
<h3 id="设置断点"><a href="#设置断点" class="headerlink" title="设置断点"></a>设置断点</h3><h4 id="命令行方式"><a href="#命令行方式" class="headerlink" title="命令行方式"></a>命令行方式</h4><pre><code>$ python -m pdb exp1.py
&gt; /Users/Mr-zhao/work_space/scripts/exp1.py(3)&lt;module&gt;()
-&gt; x = 1
(Pdb) l
    1   #!/usr/bin/env python
    2
    3  -&gt;   x = 1
    4   y = 2
    5   z = x + y
    6   print z
[EOF]
(Pdb) b 5  #设置第5行断点
Breakpoint 1 at /Users/Mr-zhao/work_space/scripts/exp1.py:5
(Pdb) b
Num Type         Disp Enb   Where
1   breakpoint   keep yes   at /Users/Mr-zhao/work_space/scripts/exp1.py:5
(Pdb) c  #执行程序停留在断点位置
&gt; /Users/Mr-zhao/work_space/scripts/exp1.py(5)&lt;module&gt;()
-&gt; z = x + y
(Pdb) q 
</code></pre><h4 id="脚本内部设置"><a href="#脚本内部设置" class="headerlink" title="脚本内部设置"></a>脚本内部设置</h4><pre><code>$ cat exp.py
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import pdb  #导入模块
def pdbexp(x,y):
    a = 1
    return a+x+y
x = 1
y = 2
pdb.set_trace()   #设置断点
z = pdbexp(x,y)
print z
</code></pre><p>开始调试：</p>
<pre><code>$ python exp.py
&gt; /Users/Mr-zhao/work_space/scripts/exp.py(9)&lt;module&gt;()
-&gt; z = pdbexp(x,y)
(Pdb) l
    4       a = 1
    5       return a+x+y
    6   x = 1
    7   y = 2
    8   pdb.set_trace()
    9  -&gt;   z = pdbexp(x,y)
    10      print z
[EOF]
(Pdb) s  #进入函数
--Call--
&gt; /Users/Mr-zhao/work_space/scripts/exp.py(3)pdbexp()
-&gt; def pdbexp(x,y):
(Pdb) a #打印函数参数
x = 1
y = 2
(Pdb) c #继续运行
4
</code></pre><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="http://www.ibm.com/developerworks/cn/linux/l-cn-pythondebugger/index.html" target="_blank" rel="external">Python 代码调试技巧</a><br><a href="https://docs.python.org/2/library/pdb.html" target="_blank" rel="external">pdb官方文档</a></p>
</div></article><div class="tags"><a href="/tags/pdb/">pdb</a></div><div class="paginator"><a href="/2016/11/04/ansible-python-api/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div></section><footer><div class="social"><a href="https://github.com/Abnerzhao" title="github" class="iconfont icon-github"></a><a href="mailto:opsabnerzhao@gmail.com" title="email" class="iconfont icon-email"></a><a href="http://weibo.com/2863179107/profile?topnav=1&amp;wvr=6&amp;is_all=1" title="weibo" class="iconfont icon-weibo"></a></div><div class="copyright"><p class="power">Powered by <a href="https://hexo.io/">Hexo</a> and Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p><p class="since">&copy;2015-2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Abnerzhao</span></p></div><div id="back2top"><i class="iconfont icon-up"></i></div></footer></div><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></body></html>