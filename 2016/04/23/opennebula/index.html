<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="Abnerzhao"><meta name="description" content="一、OpenNebula简介1.1云管理平台的选择1.2OpenNebula体系结构1.3OpenNebula组件介绍二、OpenNebula安装配置2.1环境说明2.2软件包组成2.3Server端安装和配置2.4节点端安装配置三、节点添加"><meta name="keywords" content="opennebula"><title>OpenNebula 4.14 快速入门 · Abner</title><link rel="icon" href="/favicon.ico"><link rel="canonical" href="http://yoursite.com/2016/04/23/opennebula/"><link rel="alternate" href="/atom.xml" title="Abner"><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><link rel="stylesheet" href="/css/style.css"><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?5832f612aff8681e2ee213a3b8d9548b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'Your Google Analytics ID', 'auto');
ga('send', 'pageview');</script></head><body><div id="main"><header><a href="/." class="logo">Abner</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li><li class="nav-link"><a href="/categories/" target="_self">Categories</a></li><li class="nav-link"><a href="/about/" target="_self">About</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">OpenNebula 4.14 快速入门</h1><span class="post-time">Apr 23, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Contents</h3><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#一、OpenNebula简介"><span class="toc-text">一、OpenNebula简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二、OpenNebula安装配置"><span class="toc-text">二、OpenNebula安装配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三、节点添加"><span class="toc-text">三、节点添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#四、制作系统镜像"><span class="toc-text">四、制作系统镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#五、导入镜像"><span class="toc-text">五、导入镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#六、虚拟网络"><span class="toc-text">六、虚拟网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#七、制作模板"><span class="toc-text">七、制作模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#八、创建虚拟机"><span class="toc-text">八、创建虚拟机</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一、OpenNebula简介-1"><span class="toc-text">一、OpenNebula简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-云管理平台的选择"><span class="toc-text">1.1 云管理平台的选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-OpenNebula体系结构"><span class="toc-text">1.2 OpenNebula体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-OpenNebula组件介绍"><span class="toc-text">1.3 OpenNebula组件介绍</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、OpenNebula安装配置-1"><span class="toc-text">二、OpenNebula安装配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-环境说明"><span class="toc-text">2.1 环境说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-软件包组成"><span class="toc-text">2.2 软件包组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-Server端安装和配置"><span class="toc-text">2.3 Server端安装和配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-节点端安装配置"><span class="toc-text">2.4 节点端安装配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、节点添加-1"><span class="toc-text">三、节点添加</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-web界面添加主机"><span class="toc-text">3.1 web界面添加主机</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-命令行添加主机"><span class="toc-text">3.2 命令行添加主机</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-onehost-命令"><span class="toc-text">3.2.1  onehost 命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、制作系统镜像-1"><span class="toc-text">四、制作系统镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-qemu-img命令"><span class="toc-text">4.1 qemu-img命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-qemu-kvm（-kvm-）命令"><span class="toc-text">4.2 qemu-kvm（ kvm ）命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-系统优化"><span class="toc-text">4.3 系统优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、导入镜像-1"><span class="toc-text">五、导入镜像</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-web界面导入映像"><span class="toc-text">5.1 web界面导入映像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-命令行导入映像"><span class="toc-text">5.2 命令行导入映像</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1-oneimg-命令"><span class="toc-text">5.2.1 oneimg 命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、虚拟网络-1"><span class="toc-text">六、虚拟网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-web界面添加虚拟网络"><span class="toc-text">6.1 web界面添加虚拟网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-命令行添加虚拟网络"><span class="toc-text">6.2 命令行添加虚拟网络</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1-onevnet-命令"><span class="toc-text">6.2.1 onevnet 命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七、制作模板-1"><span class="toc-text">七、制作模板</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-web-界面制作模板"><span class="toc-text">7.1  web 界面制作模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-Context初始化功能"><span class="toc-text">7.2  Context初始化功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-修改母盘镜像"><span class="toc-text">7.2.1 修改母盘镜像</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八、创建虚拟机-1"><span class="toc-text">八、创建虚拟机</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-web界面创建虚拟机"><span class="toc-text">8.1 web界面创建虚拟机</span></a></li></ol></div><div class="post-content"><h3 id="一、OpenNebula简介"><a href="#一、OpenNebula简介" class="headerlink" title="一、OpenNebula简介"></a>一、OpenNebula简介</h3><ul>
<li>1.1 云管理平台的选择</li>
<li>1.2 OpenNebula体系结构</li>
<li>1.3 OpenNebula组件介绍</li>
</ul>
<h3 id="二、OpenNebula安装配置"><a href="#二、OpenNebula安装配置" class="headerlink" title="二、OpenNebula安装配置"></a>二、OpenNebula安装配置</h3><ul>
<li>2.1 环境说明</li>
<li>2.2 软件包组成</li>
<li>2.3 Server端安装和配置</li>
<li>2.4 节点端安装配置</li>
</ul>
<h3 id="三、节点添加"><a href="#三、节点添加" class="headerlink" title="三、节点添加"></a>三、节点添加</h3><ul>
<li>3.1 web界面添加主机</li>
<li>3.2 命令行添加主机<ul>
<li>3.2.1 onehost 命令</li>
</ul>
</li>
</ul>
<h3 id="四、制作系统镜像"><a href="#四、制作系统镜像" class="headerlink" title="四、制作系统镜像"></a>四、制作系统镜像</h3><ul>
<li>4.1 qemu-img命令</li>
<li>4.2 qemu-kvm（ kvm ）命令</li>
<li>4.3 系统优化</li>
</ul>
<h3 id="五、导入镜像"><a href="#五、导入镜像" class="headerlink" title="五、导入镜像"></a>五、导入镜像</h3><ul>
<li>5.1 web界面导入映像</li>
<li>5.2 命令行导入映像<ul>
<li>5.2.1 oneimg 命令</li>
</ul>
</li>
</ul>
<h3 id="六、虚拟网络"><a href="#六、虚拟网络" class="headerlink" title="六、虚拟网络"></a>六、虚拟网络</h3><ul>
<li>6.1 web界面添加虚拟网络</li>
<li>6.2 命令行添加虚拟网络<ul>
<li>6.2.1 onevnet 命令</li>
</ul>
</li>
</ul>
<h3 id="七、制作模板"><a href="#七、制作模板" class="headerlink" title="七、制作模板"></a>七、制作模板</h3><ul>
<li>7.1 web 界面制作模板</li>
<li>7.2 Context初始化功能<ul>
<li>7.2.1 修改母盘镜像</li>
</ul>
</li>
</ul>
<h3 id="八、创建虚拟机"><a href="#八、创建虚拟机" class="headerlink" title="八、创建虚拟机"></a>八、创建虚拟机</h3><ul>
<li>8.1 web界面创建虚拟机 </li>
</ul>
<h2 id="一、OpenNebula简介-1"><a href="#一、OpenNebula简介-1" class="headerlink" title="一、OpenNebula简介"></a>一、OpenNebula简介</h2><h3 id="1-1-云管理平台的选择"><a href="#1-1-云管理平台的选择" class="headerlink" title="1.1 云管理平台的选择"></a>1.1 云管理平台的选择</h3><p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/5BA41662-3FBA-42C6-928C-4EB8B665BD4C.png" alt=""></p>
<p><strong>OpenNebula</strong></p>
<p>OpenNebula是一款功能丰富且灵活性非常强的解决方案，用于构建和管理企业云及数据中心虚拟化。OpenNebula支持Xen、KVM、VMware ESX虚拟化引擎，可以一起混合建立和管理私有云，同时还提供了Deltacloud适配器和Amazon EC2的API兼容。官方网站 <a href="http://opennebula.org/。" target="_blank" rel="external">http://opennebula.org/。</a></p>
<h3 id="1-2-OpenNebula体系结构"><a href="#1-2-OpenNebula体系结构" class="headerlink" title="1.2 OpenNebula体系结构"></a>1.2 OpenNebula体系结构</h3><p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/039ED6D4-843B-4C7C-827E-88D680082A58.png" alt=""></p>
<h3 id="1-3-OpenNebula组件介绍"><a href="#1-3-OpenNebula组件介绍" class="headerlink" title="1.3 OpenNebula组件介绍"></a>1.3 OpenNebula组件介绍</h3><p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/C7012638-A918-4D89-815C-15BAEAB2E735.png" alt=""></p>
<p><strong>Front-End（前端）</strong></p>
<p>用于运行OpenNebula服务。包含了诸多功能组件，如OpenNebula管理进程oned、调度器mm_sched、一个Web接口服务sunstone-server。</p>
<p><strong>Host（宿主机）</strong></p>
<p>用于运行所有虚拟机</p>
<p><strong>Datastores（数据存储）</strong></p>
<p>用于实际存放虚拟机的硬盘，可以是任意一种存储介质，NAS（网络附加存储）、SAN（存储区域网络）、直连存储设备（宿主机本地硬盘）。<br>数据存储可以细分为三大类：</p>
<ul>
<li>系统数据存储</li>
<li>镜像数据存储</li>
<li>文件数据存储</li>
</ul>
<p><strong>Network（网络）</strong></p>
<h2 id="二、OpenNebula安装配置-1"><a href="#二、OpenNebula安装配置-1" class="headerlink" title="二、OpenNebula安装配置"></a>二、OpenNebula安装配置</h2><h3 id="2-1-环境说明"><a href="#2-1-环境说明" class="headerlink" title="2.1 环境说明"></a>2.1 环境说明</h3><p>系统环境：ubuntu 14.04</p>
<p>OpenNebula版本：4.14</p>
<h3 id="2-2-软件包组成"><a href="#2-2-软件包组成" class="headerlink" title="2.2 软件包组成"></a>2.2 软件包组成</h3><p>从官网下载源码包或使用OpenNebula源，添加 OpenNebula 源方法如下:</p>
<pre><code># wget -q -O- http://downloads.opennebula.org/repo/Ubuntu/repo.key | apt-key add -
# echo &quot;deb http://downloads.opennebula.org/repo/4.14/Ubuntu/14.04/ stable opennebula&quot; \
&gt; /etc/apt/sources.list.d/opennebula.list
</code></pre><p>OpenNebula主要由以下软件包组成：</p>
<ul>
<li>opennebula-common  Provides the user and common files</li>
<li>ruby-opennebula: All ruby libraries</li>
<li>opennebula-node: Prepares a node as an opennebula-node</li>
<li>opennebula-sunstone: OpenNebula Sunstone Web Interface</li>
<li>opennebula-tools: Command Line interface</li>
<li>opennebula-gate: Gate server that enables communication between VMs and OpenNebula</li>
<li>opennebula-flow: Manages services and elasticity</li>
<li>libopennebula-java: Java Language bindings for OpenNebula API</li>
<li>opennebula: OpenNebula Daemon</li>
<li>libopennebula-java: Java Language bindings for OpenNebula API</li>
</ul>
<h3 id="2-3-Server端安装和配置"><a href="#2-3-Server端安装和配置" class="headerlink" title="2.3 Server端安装和配置"></a>2.3 Server端安装和配置</h3><p>上文已经配置好了OpenNebula 的源,安装方法如下:</p>
<pre><code># apt-get install opennebula opennebula-sunstone -y
</code></pre><p>安装完成之后检查创建的用户以及目录文件：</p>
<pre><code># grep oneadmin /etc/passwd
oneadmin:x:9869:9869::/var/lib/one:/bin/bash
# ls -ld /etc/one/
drwxr-xr-x 8 root root 4096 Apr 23 16:22 /etc/one/
# ls /etc/init.d/opennebula*
/etc/init.d/opennebula        /etc/init.d/opennebula-novnc
/etc/init.d/opennebula-econe  /etc/init.d/opennebula-sunstone
# ls -ld /var/log/one/
drwxr-xr-x 2 oneadmin oneadmin 4096 Apr 23 16:22 /var/log/one/
</code></pre><p>默认 OpenNebula 使用数据库为sqlite,如果需要使用 MySQL,则需要做如下操作:</p>
<p>1.创建opennebula数据库</p>
<pre><code>mysql&gt; create database opennebula;
Query OK, 1 row affected (0.00 sec)

mysql&gt; grant all privileges on opennebula.* to oneadmin@&apos;localhost&apos; identified by &apos;oneadmin&apos;;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; flush privileges;
Query OK, 0 rows affected (0.00 sec)
</code></pre><p>2.修改配置文件</p>
<pre><code># vi /etc/one/oned.conf
......
#DB = [ backend = &quot;sqlite&quot; ]
# Sample configuration for MySQL 

DB = [ backend = &quot;mysql&quot;,
   server  = &quot;localhost&quot;,
   port    = 3306,
   user    = &quot;oneadmin&quot;,
   passwd  = &quot;oneadmin&quot;,
   db_name = &quot;opennebula&quot; ]
......
</code></pre><p>修改 sunstone 默认监听 IP:</p>
<pre><code># grep &apos;:host&apos; /etc/one/sunstone-server.conf
:host: 127.0.0.1
# sed -i &apos;/:host/s/127.0.0.1/10.249.7.247/g&apos; /etc/one/sunstone-server.conf
# grep &apos;:host&apos; /etc/one/sunstone-server.conf
:host: 10.249.7.247
</code></pre><p>启动相关服务:</p>
<pre><code># /etc/init.d/opennebula start
# /etc/init.d/opennebula-sunstone  start
# lsof -i:9869
COMMAND   PID     USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
ruby    15387 oneadmin    8u  IPv4  50024      0t0  TCP 10.249.7.247:9869 (LISTEN)
</code></pre><p>修改datastore：</p>
<p>OpenNebula 默认用的是 Shared Transfer Driver,这种模式比较适合快速部署和热迁移,但是要配置网络文件系统。由于我们这里并没有配置网络文件系统,暂时也无法做热迁移,那么可以换成 SSH Transfer Driver 测试部署。</p>
<pre><code># onedatastore list
ID NAME                SIZE AVAIL CLUSTER      IMAGES TYPE DS      TM      STAT
0 system                0M -     -                 0 sys  -       shared  on
1 default             2.6T 95%   -                 0 img  fs      shared  on
2 files               2.6T 95%   -                 0 fil  fs      ssh     on
# onedatastore update 1
BASE_PATH=&quot;/var/lib/one//datastores/&quot;
CLONE_TARGET=&quot;SYSTEM&quot;
DISK_TYPE=&quot;FILE&quot;
DS_MAD=&quot;fs&quot;
LN_TARGET=&quot;SYSTEM&quot;
TM_MAD=&quot;ssh&quot;
TYPE=&quot;IMAGE_DS&quot;
# onedatastore list
ID NAME                SIZE AVAIL CLUSTER      IMAGES TYPE DS      TM      STAT
0 system                0M -     -                 0 sys  -       shared  on
1 default             2.6T 95%   -                 0 img  fs      ssh     on
2 files               2.6T 95%   -                 0 fil  fs      ssh     on
</code></pre><p>浏览器登陆测试: </p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/03030E96-598A-479F-9043-722559F20579.png" alt=""></p>
<p>用户名和密码通过以下方式获得:</p>
<pre><code># cat /var/lib/one/.one/one_auth
oneadmin:EcvubryacOv9
</code></pre><h3 id="2-4-节点端安装配置"><a href="#2-4-节点端安装配置" class="headerlink" title="2.4 节点端安装配置"></a>2.4 节点端安装配置</h3><p>opennebula的源的配置见Server端安装配置章节，节点端软件包安装如下：</p>
<pre><code># apt-get install opennebula-node  bridge-utils -y
</code></pre><p>安装过程同时会安装虚拟化相关组件,包括 bridge-utils、libvirt、 kvm、qemu-img 等。</p>
<p>网络配置：</p>
<p>eth0 为管理网口，eth1 为trunk口用作虚拟机通信，需要创建桥接网口。官方文档中提示需要手动创建桥接网络，但是本人在实际使用中通过web管理平台的虚拟网络可以实现自动绑定br0 到eth1网卡上。</p>
<pre><code># cat /etc/network/interfaces
auto lo
iface lo inet loopback
auto eth0
iface eth0 inet static
address 10.249.7.247
netmask 255.255.255.0
gateway 10.249.7.254
auto eth1
iface eth1 inet manual
# brctl show
bridge name bridge id       STP enabled interfaces
virbr0      8000.000000000000   yes
</code></pre><p>查看qemu的配置：</p>
<pre><code># cat /etc/libvirt/qemu.conf
user  = &quot;oneadmin&quot;
group = &quot;oneadmin&quot;
dynamic_ownership = 0
</code></pre><p>启动libvirt服务：</p>
<pre><code># service libvirt-bin restart
</code></pre><p>ssh 无密码登陆:</p>
<p>管理端：</p>
<pre><code># su - oneadmin
$ cat &lt;&lt; EOT &gt; ~/.ssh/config    //不询问直接添加主机到known_hosts文件
Host *
    StrictHostKeyChecking no
    UserKnownHostsFile /dev/null
EOT
$ chmod 600 ~/.ssh/config
</code></pre><p>节点端：</p>
<pre><code>￼# su - oneadmin
$ vim  ~/.ssh/authorized_key   //把管理端ssh公钥加入节点.ssh/authorized_keys文件
$ chmod 400 .ssh/authorized_keys
</code></pre><h2 id="三、节点添加-1"><a href="#三、节点添加-1" class="headerlink" title="三、节点添加"></a>三、节点添加</h2><p>节点配置完成之后便可以在 Server 端添加了,可以使用web 添加,也可以在命令行中添加。</p>
<h3 id="3-1-web界面添加主机"><a href="#3-1-web界面添加主机" class="headerlink" title="3.1 web界面添加主机"></a>3.1 web界面添加主机</h3><p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/907F38A5-3CA1-4424-8867-BA815E3EE4D6.png" alt=""></p>
<p>创建主机,主机名一栏可以是IP也可以是可以解析的主机域名,这里使用的是IP</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/7250BDBA-1EAE-4750-9C93-5BD3D29A7263.png" alt=""></p>
<p>如上图选择完之后,点击创建按钮就可以出现如下主机,状态为初始化</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/02DF2945-100E-4846-8D66-297B86D3A8BD.png" alt=""></p>
<p>如果一切正常,等待片刻则状态就会变为开机,也会显示主机CPU和内存信息,如下图:</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/44D05DBE-D2D4-450B-BFC0-61E48606F944.png" alt=""></p>
<p>可以看到当前运行的VM数量是0，点击目标主机，可以查看主机的详细信息，如下图：</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/826BEA35-1853-4B62-A1B6-61F082DAD23F.png" alt=""></p>
<h3 id="3-2-命令行添加主机"><a href="#3-2-命令行添加主机" class="headerlink" title="3.2 命令行添加主机"></a>3.2 命令行添加主机</h3><h4 id="3-2-1-onehost-命令"><a href="#3-2-1-onehost-命令" class="headerlink" title="3.2.1  onehost 命令"></a>3.2.1  onehost 命令</h4><p>使用 onehost 命令删除之前 web 创建的主机,如下:</p>
<pre><code># su - oneadmin
$ onehost list
ID NAME            CLUSTER   RVM      ALLOCATED_CPU      ALLOCATED_MEM STAT
1 10.249.7.247    -           0      0 / 3200 (0%)   0K / 125.7G (0%) on
$ onehost delete 1
$ onehost list
ID NAME            CLUSTER   RVM      ALLOCATED_CPU      ALLOCATED_MEM STAT
</code></pre><p> 然后我们再使用 onehost 命令创建主机：</p>
<pre><code>$ onehost create   10.249.7.247 --im kvm --vm kvm --net dummy
ID: 2
$ onehost list
ID NAME            CLUSTER   RVM      ALLOCATED_CPU      ALLOCATED_MEM STAT
2 10.249.7.247    -           0                  -                  - init
$ onehost list
ID NAME            CLUSTER   RVM      ALLOCATED_CPU      ALLOCATED_MEM STAT
2 10.249.7.247    -           0      0 / 3200 (0%)   0K / 125.7G (0%) on
</code></pre><ul>
<li>-i, –im im_mad           Set the information driver for the host   //信息管理 driver. 可选: kvm, xen, vmware, ec2, ganglia, dummy.</li>
<li>-v, –vm vmm_mad          Set the virtualization driver for the host //虚拟化管理 driver. 可选: kvm, xen, vmware, ec2, dummy.</li>
<li>-n, –net vnet_mad        Set the network driver for the host  //虚拟网络driver.可选：802.1Q,dummy,ebtables,fw,ovswitch,vmware.</li>
</ul>
<p>了解更多 onehost 命令用法请查看man手册。</p>
<h2 id="四、制作系统镜像-1"><a href="#四、制作系统镜像-1" class="headerlink" title="四、制作系统镜像"></a>四、制作系统镜像</h2><p>虚拟机有多种镜像格式可供选择,常见的有如 raw、vdi、 qcow2、vmdk、qed、vhd 等格式。</p>
<p>虚拟机镜像和服务器之间的关系如下图所示：</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/2533DDFD-5676-437A-9788-B173ECE01179.png" alt=""></p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/4B51B99B-FF41-4806-839A-8927817F314C.png" alt=""></p>
<h3 id="4-1-qemu-img命令"><a href="#4-1-qemu-img命令" class="headerlink" title="4.1 qemu-img命令"></a>4.1 qemu-img命令</h3><p>qemu-img 是 QEMU 的磁盘管理工具,支持多种虚拟镜像格式。</p>
<pre><code># qemu-img  -h | grep Supported
Supported formats: vvfat vpc vmdk vhdx vdi sheepdog sheepdog sheepdog rbd raw host_cdrom host_floppy host_device file qed qcow2 qcow parallels nbd nbd nbd dmg tftp ftps ftp https http cow cloop bochs blkverify blkdebug
</code></pre><p>qemu-img 默认创建的格式是 raw，常用的格式为 raw、qcow2等。qemu-img常用的命令有：</p>
<pre><code># qemu-img check [-f fmt]  filename    //对磁盘镜像文件进行一致性检查,查找镜像文件中的错误,目前仅支持对“qcow2”、“qed”、“vdi”格式文件的检查。
# qemu-img create [-f fmt] filename [size]   //创建一个格式为 fmt 大小为 size 文件名为filename 的镜像文件。
# qemu-img info [-f fmt] filename  //显示 filename 镜像文件的信息。
</code></pre><p>这里我们使用 qemu-img 命令创建一个 50G 大小格式为 qcow2 的系统镜像：</p>
<pre><code># qemu-img  create -f qcow2 ubuntu14.04.qcow2 50G
</code></pre><p>关于 qemu-img 的更多高级用法可以参考 man 手册。</p>
<h3 id="4-2-qemu-kvm（-kvm-）命令"><a href="#4-2-qemu-kvm（-kvm-）命令" class="headerlink" title="4.2 qemu-kvm（ kvm ）命令"></a>4.2 qemu-kvm（ kvm ）命令</h3><p>在centos中该命令为 qemu-kvm, 而在ubuntu的系统中该命令为kvm，由于我的测试机为ubuntu的系统所以后面会使用到 kvm 命令。</p>
<p>安装系统：</p>
<pre><code># kvm -m 1024 -cdrom /work-space/ubuntu-14.04.3-server-amd64.iso \ 
-drive file=/work-space/ubuntu14.04.qcow2,if=virtio -net nic,model=virtio \
-net tap,script=no -boot d -nographic -vnc :0
</code></pre><p>以上参数释义如下，更多 kvm 的参数使用说明请参考 man 手册：</p>
<ul>
<li>-m  指定内存大小</li>
<li>-cdrom   指定系统 iso 镜像</li>
<li>-drive file=xx,if=xx   指定硬盘镜像,file=镜像文件名,if=镜像格式类型 </li>
<li>-net nic,model=xx   表示网卡配置,model=模拟网卡类型,默认 rt18139</li>
<li>-net tap,script=no   虚拟设备,桥接网络,script 表启动虚拟机自动执行网络配置脚本,<br>如果不需要启动,则写 no </li>
<li>-boot d  系统启动顺序,d表示表示cdrom </li>
<li>-nographic  关闭图形输出</li>
<li>-vnc:0 开启vnc监听</li>
</ul>
<p>输入以上命令之后,通过 VNC 客户端连接按照正常的安装流程安装系统即可：</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/E2156E2D-BF0F-4EFD-A37D-9E685DA900FD.png" alt=""></p>
<h3 id="4-3-系统优化"><a href="#4-3-系统优化" class="headerlink" title="4.3 系统优化"></a>4.3 系统优化</h3><p>在母盘上装好系统之后，可以进行一些优化如 selinux、iptables、软件源、相关服务等，这样后面使用该母盘创建的虚拟机就可以省去优化的步骤。</p>
<pre><code># kvm -m 1024  -drive file=/work-space/ubuntu14.04.qcow2,if=virtio \
-net nic,model=virtio -net tap,script=no  -nographic -vnc :0
</code></pre><p>输入以上命令之后,通过 VNC 客户端连接就能进入刚装好的系统。</p>
<h2 id="五、导入镜像-1"><a href="#五、导入镜像-1" class="headerlink" title="五、导入镜像"></a>五、导入镜像</h2><p>添加主机可以使用 web 页面添加,也可以使用命令添加,导入镜像 web 和命令也都可以实现。</p>
<h3 id="5-1-web界面导入映像"><a href="#5-1-web界面导入映像" class="headerlink" title="5.1 web界面导入映像"></a>5.1 web界面导入映像</h3><p>1.选择映像管理—&gt; 添加<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/A408EEF7-7ADC-4B3F-86EB-FACB978093B4.png" alt=""></p>
<p>2.点击添加之后出现如下弹框,根据实际填写<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/C32678CF-1D95-4AB6-B56A-7F31FFEB8297.png" alt=""></p>
<p>持久性:如果您在虚拟机模板中使用了持久性的磁盘映像,你只能够基于该模板创建一个正在运行的虚拟机。这是因为一个持久型的磁盘映像只能够同时被应用到一台正在运行的虚拟机上。如果您在虚拟机模板中使用的是临时性的磁盘映像,则可以同时基于该模板创建 多个虚拟机。</p>
<p>3.导入后初始状态为锁定<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/49406625-17E8-4914-834B-4967587B66D1.png" alt=""></p>
<p>4.导入完成之后就会显示就绪状态<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/F08296E6-2554-462C-9215-62D4F4938FF0.png" alt=""></p>
<h3 id="5-2-命令行导入映像"><a href="#5-2-命令行导入映像" class="headerlink" title="5.2 命令行导入映像"></a>5.2 命令行导入映像</h3><h4 id="5-2-1-oneimg-命令"><a href="#5-2-1-oneimg-命令" class="headerlink" title="5.2.1 oneimg 命令"></a>5.2.1 oneimg 命令</h4><pre><code># su - oneadmin
$ oneimage list
ID USER       GROUP      NAME            DATASTORE     SIZE TYPE PER STAT RVMS
1 oneadmin   oneadmin   ubuntu14.04_50G default        50G OS    No rdy     0
</code></pre><p>使用 oneimg 导入系统映像 </p>
<pre><code>$ cat ubuntu14.04_test.one   //创建相关配置文件
NAME    = &quot;ubuntu14.04_test&quot;
PATH    = /work-space/ubuntu14.04.qcow2
TYPE    = OS
DESCRIPTION = &quot;ubuntu14.04_test&quot;
DRIVER  = qcow2
$ onedatastore list  //选择数据仓库,这里选择default
ID NAME                SIZE AVAIL CLUSTER      IMAGES TYPE DS      TM      STAT
0 system              2.6T 95%   -                 0 sys  -       shared  on
1 default             2.6T 95%   -                 1 img  fs      ssh     on
2 files               2.6T 95%   -                 0 fil  fs      ssh     on
$ oneimage create ubuntu14.04_test.one  --datastore default
ID: 2
$ oneimage list   //初始状态 lock
ID USER       GROUP      NAME            DATASTORE     SIZE TYPE PER STAT RVMS
1 oneadmin   oneadmin   ubuntu14.04_50G default        50G OS    No rdy     0
2 oneadmin   oneadmin   ubuntu14.04_tes default        50G OS    No lock    0
$ oneimage list  //再次查看状态变为 rdy
ID USER       GROUP      NAME            DATASTORE     SIZE TYPE PER STAT RVMS
1 oneadmin   oneadmin   ubuntu14.04_50G default        50G OS    No rdy     0
2 oneadmin   oneadmin   ubuntu14.04_tes default        50G OS    No rdy     0
</code></pre><p>使用 oneimage 命令和创建 ubuntu14.04_test.one 文件在web 页面创建映像的高级模式中同样能实现：</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/CF777085-1F87-484F-AD7E-F8B0B966688B.png" alt=""></p>
<p>克隆镜像：oneimage clone  \<imageid>  \<name></name></imageid></p>
<p>有时需要修改某个镜像,在修改之前我们可以通过克隆的方式备份这个镜像</p>
<pre><code>$ oneimage list
ID USER       GROUP      NAME            DATASTORE     SIZE TYPE PER STAT RVMS
1 oneadmin   oneadmin   ubuntu14.04_50G default        50G OS    No rdy     0
2 oneadmin   oneadmin   ubuntu14.04_tes default        50G OS    No rdy     0
$ oneimage  clone 1  ubuntu14.04_bak  // 指定克隆的映像id
ID: 3
$ oneimage list
ID USER       GROUP      NAME            DATASTORE     SIZE TYPE PER STAT RVMS
1 oneadmin   oneadmin   ubuntu14.04_50G default        50G OS    No rdy     0
2 oneadmin   oneadmin   ubuntu14.04_tes default        50G OS    No rdy     0
3 oneadmin   oneadmin   ubuntu14.04_bak default        50G OS    No rdy     0
</code></pre><p>删除镜像 :  oneimage delete \<imageid |="" imagename=""></imageid></p>
<p>查看镜像详细信息：oneimage show</p>
<pre><code>$ oneimage show 1
IMAGE 1 INFORMATION
ID             : 1
NAME           : ubuntu14.04_50G
USER           : oneadmin
GROUP          : oneadmin
DATASTORE      : default
TYPE           : OS
REGISTER TIME  : 04/24 12:18:33
PERSISTENT     : No
SOURCE         : /var/lib/one//datastores/1/06f1f1d5f87d7aa92a528800b61e5983
PATH           : /work-space/ubuntu14.04.qcow2
SIZE           : 50G
STATE          : rdy
RUNNING_VMS    : 0

PERMISSIONS
OWNER          : um-
GROUP          : ---
OTHER          : ---

IMAGE TEMPLATE
DESCRIPTION=&quot;ubuntu14.04_50G&quot;
DEV_PREFIX=&quot;hd&quot;
DRIVER=&quot;qcow2&quot;

VIRTUAL MACHINES
</code></pre><h2 id="六、虚拟网络-1"><a href="#六、虚拟网络-1" class="headerlink" title="六、虚拟网络"></a>六、虚拟网络</h2><ul>
<li>eth0 为管理网口</li>
<li>eth1 为trunk口用作虚拟机通信，通过桥接br0</li>
</ul>
<h3 id="6-1-web界面添加虚拟网络"><a href="#6-1-web界面添加虚拟网络" class="headerlink" title="6.1 web界面添加虚拟网络"></a>6.1 web界面添加虚拟网络</h3><p>1.选择虚拟网络—&gt; 添加<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/6A422EA5-D7E3-4934-BEEF-A2DD5DA5D5B7.png" alt=""></p>
<p>2.点击添加之后出现如下弹框,根据实际填写<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/ADDF280D-B87F-4490-9A4E-85B6EE2D301B.png" alt=""><br>3.将网桥br0绑定到eth1 (网络模式和vlan概念还有点疑惑)<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/E2758C26-77CA-46EB-9441-EE923BFB3E69.png" alt=""><br>4.添加地址范围<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/726A4927-11ED-4726-A2F8-12A904BEED02.png" alt=""></p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/8717FB7C-97F4-4BC8-8505-DAD4C363A946.png" alt=""><br>5.完成其他相关配置，点击创建<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/EFFC8DC0-7B4B-4F0F-B1DF-F6878E731AAE.png" alt=""></p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/DAF058BB-9617-4D6C-A32F-225788F98BCD.png" alt=""></p>
<h3 id="6-2-命令行添加虚拟网络"><a href="#6-2-命令行添加虚拟网络" class="headerlink" title="6.2 命令行添加虚拟网络"></a>6.2 命令行添加虚拟网络</h3><h4 id="6-2-1-onevnet-命令"><a href="#6-2-1-onevnet-命令" class="headerlink" title="6.2.1 onevnet 命令"></a>6.2.1 onevnet 命令</h4><pre><code>$ onevnet list    //显示当前的虚拟网络
ID USER            GROUP        NAME                CLUSTER    BRIDGE   LEASES
0 oneadmin        oneadmin     test-network        -          br0           0
</code></pre><p>添加虚拟网络:</p>
<pre><code>$ cat onevnet_test.net
NAME    = &quot;onevnet_test&quot;
TYPE    = RANGED
BRIDGE = br0
NETWORK_ADDRESS = 10.249.6.0/24
IP_START        = 10.249.6.105
IP_END          = 10.249.6.107

GATEWAY = 10.249.6.254
DNS     = 10.249.6.100
$ onevnet create onevnet_test.net     // 添加虚拟网络
ID: 1
$ onevnet list
ID USER            GROUP        NAME                CLUSTER    BRIDGE   LEASES
0 oneadmin        oneadmin     test-network        -          br0           0
1 oneadmin        oneadmin     onevnet_test        -          br0           0
</code></pre><p>以上.net 文件中的内容可以直接输入到 web 创建虚拟网络的高级模式中创建。</p>
<p>删除虚拟网络:</p>
<pre><code>$ onevnet  delete 1
</code></pre><p>查看虚拟网络详细信息:</p>
<pre><code>$ onevnet  show 0
VIRTUAL NETWORK 0 INFORMATION
ID             : 0
NAME           : test-network
USER           : oneadmin
GROUP          : oneadmin
CLUSTER        : -
BRIDGE         : br0
VLAN           : Yes
PHYSICAL DEVICE: eth1
VLAN ID        : 6
USED LEASES    : 0

......
VIRTUAL NETWORK TEMPLATE
BRIDGE=&quot;br0&quot;
DESCRIPTION=&quot;test-network&quot;
DNS=&quot;10.249.6.100&quot;
GATEWAY=&quot;10.249.6.254&quot;
NETWORK_ADDRESS=&quot;10.249.6.0&quot;
NETWORK_MASK=&quot;255.255.255.0&quot;
PHYDEV=&quot;eth1&quot;
SECURITY_GROUPS=&quot;0&quot;
VLAN=&quot;YES&quot;
VLAN_ID=&quot;6&quot;
......
</code></pre><h2 id="七、制作模板-1"><a href="#七、制作模板-1" class="headerlink" title="七、制作模板"></a>七、制作模板</h2><p>模板就是包括创建虚拟机时使用到的系统镜像、以及各种配置的一个定义。</p>
<h3 id="7-1-web-界面制作模板"><a href="#7-1-web-界面制作模板" class="headerlink" title="7.1  web 界面制作模板"></a>7.1  web 界面制作模板</h3><p>1.选择模板管理—&gt; 添加<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/F02F53A0-473C-4F70-93E0-98B2B22F7191.png" alt=""><br>2.点击添加之后出现如下弹框,根据实际填写</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/3837A134-D0C5-4EE3-9E8D-83CD18693A85.png" alt=""><br>3.存储<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/87F81732-EEC1-4429-9868-2B6BD3D36382.png" alt=""><br>4.网络<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/80FA24E1-7D22-48F8-A57C-41AACBF326AC.png" alt=""><br>5.引导<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/3B448D17-02A9-4355-BA30-04407A83CDE0.png" alt=""><br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/9BEAEBE4-C0EA-4605-8727-6081260085BB.png" alt=""><br>6.输入输出<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/7AAABE0F-E3A1-4754-83B6-6C7E0D63C1E8.png" alt=""><br>7.Context功能<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/634670E1-53E7-4084-B0BF-84E639726AE7.png" alt=""><br>8.其他几个保持默认就行，填写完点击创建即可。</p>
<h3 id="7-2-Context初始化功能"><a href="#7-2-Context初始化功能" class="headerlink" title="7.2  Context初始化功能"></a>7.2  Context初始化功能</h3><p>Context原理图如下：</p>
<p><img src="http://7vzmp5.com1.z0.glb.clouddn.com/34977BFC-C6FE-4E0B-B3F1-2DCA0CDA56C9.png" alt=""></p>
<p>Context 通过 ISO 镜像的方式配置新启动的虚拟机,即创建虚拟机的时候 Server 管理端 会把相关的配置文件和脚本打包生成到一个 ISO 文件中,新启动的虚拟机会挂载该 ISO 镜像 并执行其中的脚本以达到自动初始化虚拟机的目的。</p>
<h4 id="7-2-1-修改母盘镜像"><a href="#7-2-1-修改母盘镜像" class="headerlink" title="7.2.1 修改母盘镜像"></a>7.2.1 修改母盘镜像</h4><pre><code># oneimage show ubuntu14.04_50G  | grep SOURCE   //获取之前创建镜像位置
SOURCE         : /var/lib/one//datastores/1/06f1f1d5f87d7aa92a528800b61e5983
# kvm -m 1024  -drive file=/var/lib/one//datastores/1/06f1f1d5f87d7aa92a528800b61e5983,if=virtio \
-net nic,model=virtio -net tap,script=no  -nographic -vnc :0
</code></pre><p>通过 VNC View 连接,登陆系统,新建 context 脚本:</p>
<pre><code># chmod +x  /etc/init.d/vmcontext
# cat  /etc/init.d/vmcontext
#!/bin/bash
if [ ! -d /mnt/cdrom ]; then
        mkdir /mnt/cdrom
fi
    mount /dev/cdrom /mnt/cdrom
if [ -f /mnt/cdrom/context.sh ]; then
        bash /mnt/cdrom/context.sh
        bash /mnt/cdrom/init.sh

fi
umount /mnt/cdrom
</code></pre><p>加入开机启动执行,在rc.local中加入: bash  /etc/init.d/vmcontext</p>
<p>这里有两个文件：</p>
<p><strong>/mnt/cdrom/context.sh</strong>   //Context variables generated by OpenNebula,开通虚拟机时从平台里获取到的变量，如网卡相关的配置信息等。</p>
<p><strong>/mnt/cdrom/init.sh</strong>    //自己编写放置在Server端的脚本，主要功能就是让虚拟机能自动配置上context.sh中的变量</p>
<pre><code>$ pwd
/var/lib/one/context
$ ls
centos  ubuntu  windows
$ cd ubuntu/
$ ls
init.sh
$ cat init.sh    // init.sh 脚本内容，简单实例
#!/bin/bash

INTERFACE=&quot;/etc/network/interfaces&quot;
. /mnt/cdrom/context.sh
if [ $HOSTNAME ]; then
    hostname $HOSTNAME
    echo &quot;$HOSTNAME&quot; &gt; /etc/hostname
fi

echo -ne &quot;auto lo\n&quot; &gt; $INTERFACE
echo -ne &quot;iface lo inet loopback\n&quot; &gt;&gt; $INTERFACE

for i in 0 1 2 3; do
    grep &quot;ETH${i}_IP&quot; /mnt/cdrom/context.sh &gt;&gt; /dev/null 2&gt;&amp;1

if [ $? -eq 0 ]; then
    echo -ne &quot;\nauto eth$i\n&quot;               &gt;&gt; $INTERFACE
    echo -ne &quot;iface eth$i inet static\n&quot;    &gt;&gt; $INTERFACE
    echo -ne &quot;address &quot;                     &gt;&gt; $INTERFACE
    eval echo \$ETH${i}_IP                  &gt;&gt; $INTERFACE
    echo -ne &quot;netmask &quot;                     &gt;&gt; $INTERFACE
    eval echo \$ETH${i}_MASK                &gt;&gt; $INTERFACE
    echo -ne &quot;gateway &quot;                     &gt;&gt; $INTERFACE
    eval echo \$ETH${i}_GATEWAY             &gt;&gt; $INTERFACE

    if [ $i -eq 0 ]; then
        echo -ne &quot;dns-nameservers &quot; &gt;&gt; $INTERFACE
        eval echo \$ETH${i}_DNS &gt;&gt; $INTERFACE
        echo -ne &quot;dns-search i.ajkdns.com\n&quot; &gt;&gt; $INTERFACE
    fi
fi
done

/sbin/ifdown eth0
/sbin/ifup eth0
rm -rf /etc/init.d/vmcontext
sed  -i &apos;/vmcontext/d&apos; /etc/rc.local
ifconfig eth0 &gt;/dev/null 2&gt;1
    if [ &quot;$?&quot; != &quot;0&quot; ]; then
    rm -f /etc/udev/rules.d/70-persistent-net.rules
fi
reboot
</code></pre><h2 id="八、创建虚拟机-1"><a href="#八、创建虚拟机-1" class="headerlink" title="八、创建虚拟机"></a>八、创建虚拟机</h2><h3 id="8-1-web界面创建虚拟机"><a href="#8-1-web界面创建虚拟机" class="headerlink" title="8.1 web界面创建虚拟机"></a>8.1 web界面创建虚拟机</h3><p>1.选择虚机管理—&gt; 添加<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/88C9F701-7418-4948-96D3-703EE759FA40.png" alt=""></p>
<p>2.点击添加选择模板，设置主机名<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/OpenNebula%20Sunstone%20%20Cloud%20Operations%20Center.png" alt=""></p>
<p>3.点击创建后，主机初始状态为PENDING<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/2C3C8F5B-A2EA-4AB6-ADC7-0A981D27A7E4.png" alt=""></p>
<p>4.勾选主机并部署<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/4116E61F-F971-430F-A572-D3E0506E5033.png" alt=""></p>
<p>5.部署到主机<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/C816CFBA-4A02-4D39-9CDB-F8FCBF392883.png" alt=""></p>
<p>6.部署完毕后，如果一切正常，虚拟机的状态为PROLOG—&gt; BOOT —&gt; 运行，后面即可ssh登录<br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/C3182977-E4C6-481A-ADEE-B4DBA7880D2E.png" alt=""><br><img src="http://7vzmp5.com1.z0.glb.clouddn.com/3C0DC59D-C31E-4DDE-8467-2D5AAB680C15.png" alt=""></p>
</div></article><div class="tags"><a href="/tags/opennebula/">opennebula</a></div><div class="paginator"><a href="/2016/05/05/nc/" class="prev"><i class="iconfont icon-left"></i><span> Prev</span></a><a href="/2016/03/08/Create-A-deb-Package-Repository/" class="next"><span>Next</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div data-thread-key="http://yoursite.com/2016/04/23/opennebula/index.html" data-title="OpenNebula 4.14 快速入门" data-url="http://yoursite.com/2016/04/23/opennebula/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "wulifun" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section></section><footer><div class="social"><a href="https://github.com/Abnerzhao" title="github" class="iconfont icon-github"></a><a href="mailto:opsabnerzhao@gmail.com" title="email" class="iconfont icon-email"></a><a href="http://weibo.com/2863179107/profile?topnav=1&amp;wvr=6&amp;is_all=1" title="weibo" class="iconfont icon-weibo"></a></div><div class="copyright"><p class="power">Powered by <a href="https://hexo.io/">Hexo</a> and Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p><p class="since">&copy;2015-2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Abnerzhao</span></p></div><div id="back2top"><i class="iconfont icon-up"></i></div></footer></div><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></body></html>